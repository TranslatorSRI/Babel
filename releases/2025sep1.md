# Babel 2025sep1

- Babel: [2025sep1](https://stars.renci.org/var/babel_outputs/2025sep1/)
  ([tagged 2025sep1](https://github.com/TranslatorSRI/Babel/releases/tag/2025sep1),
  [Babel v1.13](https://github.com/TranslatorSRI/Babel/releases/tag/v1.13))
  - [CURIE summary](./summaries/2025sep1.json)
  - [Prefix report](./prefix_reports/2025sep1.json)

Next release: _None as yet_
Previous release: [2025mar31](./2025mar31.md)

## Bugfixes
- [MAJOR] @uhbrar discovered that some information content values appeared odd, and @gaurav realized this was
  because the information content comparison was being carried out as a string, not as number. Fixed in
  [PR #467](https://github.com/TranslatorSRI/Babel/pull/467).
  - This was actually made in [Babel v1.11](./v1.11.md) but that isn't a real release and this is a major enough bugfix
    that I'll include it here as well.
- [MAJOR] 
    - Added a UMLS/MeSH/DrugBank concord for proteins ([PR #495](https://github.com/TranslatorSRI/Babel/pull/495)).
- KEGG.COMPOUND xrefs in ChEBI can sometimes be a list instead of an individual identifier (7a53ce62f17663a582b27ac659ddaf95a325b5c7).

## Updates
- [MAJOR] Improved DrugChemical conflation order ([PR #506](https://github.com/TranslatorSRI/Babel/pull/506)).
    - Previously, we would attempt to pick the best DrugChemical clique leader we could, and then use that to
      determine the prefix order. Unfortunately, this sometimes meant that a clique that contained e.g. SmallMolecule
      and ChemicalEntity could become typed as a ChemicalEntity if the clique leader we picked had that type, even
      though we prefer SmallMolecule.
    - This PR significantly changes this algorithm so that we now always go in the preferred conflation type order
      (i.e. SmallMolecule, MolecularMixture, etc.), choose all the identifiers of that type, and arrange them in the
      best possible order, which at the moment is:
        1. Information content (lowest --> highest)
        2. Clique size (largest --> smallest)
        3. Numerical suffix (smallest -> largest)
    - There is at least one hopefully non-critical bug with this at present (https://github.com/TranslatorSRI/Babel/issues/512).
- [MAJOR] Added an identifier-based property store ([PR #473](https://github.com/TranslatorSRI/Babel/pull/473),
  [PR #483](https://github.com/TranslatorSRI/Babel/pull/483)). This is implemented as a JSON-ND file that can be
  serialized into Property dataclasses in Python, and a PropertyList that can be loaded from multiple JSON-ND files.
  Property files will be tracked by Snakemake and provided to write_compendia().
  - [MAJOR] This allows us to add secondary identifiers to ChEBI, and will allow us to add additional secondary
    identifiers in the future.
- Replace in-memory TaxonFactory with an SQLite-based factory that attempts to stay in-memory, but will write to disk
  if it runs out of memory ([PR #482](https://github.com/TranslatorSRI/Babel/pull/482)).
  - This is implemented as a generic TSVSQLiteLoader, so hopefully we can eventually replace SynonymFactory
    and maybe DescriptionFactory with this method as well.
- Improved logging and memory tracking within the Babel build -- far from complete and not ready to be used to
  produce a memory map of the entire build, but better than nothing ([PR #477](https://github.com/TranslatorSRI/Babel/pull/477)).
    - Also actually fixed the bug that was causing the slowdown, which was that the config.yaml file was being
      repeatedly reloaded during write_compendia() and elsewhere ([PR #478](https://github.com/TranslatorSRI/Babel/pull/478)).

## New features
- [MAJOR] We now generate a GeneProteinConflated.txt.gz synonyms file ([PR #486](https://github.com/TranslatorSRI/Babel/pull/486))
  so that NameRes can be loaded with GeneProtein conflation turned on.

## Summary

| Database name    | Database ID         | Number of keys | Memory used |
|------------------|---------------------|----------------|-------------|
| id-id            | eq_id_to_id_db      | 688,874,821    | 69.84G      |
| id-eq-id         | id_to_eqids_db      | 490,286,665    | 119.51G     |
| id-categories    | id_to_type_db       | 490,286,665    | 45.90G      |
| semantic-count   | curie_to_bl_type_db | 137            | 13.90M      |
| info-content     | info_content_db     | 3,315,882      | 303.23M     |
| conflation-db    | gene_protein_db     | 33,592,119     | 5.29G       |
| chemical-drug-db | chemical_drug_db    | 106,507        | 198.51M     |
| Solr             | name_lookup         | 425,583,391    | 142.17 GB   |

## Summary of changes

| Filename                      | 2025mar31   | 2025sep1    | Diff        | % Diff   |
| ----------------------------- | ----------- | ----------- | ----------- | -------- |
| Count of CURIEs in all files  | 677,806,537 | 688,983,999 | +11,177,462 | 1.65%    |
| Count of cliques in all files | 482,038,965 | 490,293,340 | +8,254,375  | 1.71%    |
| AnatomicalEntity              | 249,164     | 249,584     | +420        | 0.17%    |
| BiologicalProcess             | 68,110      | 67,929      | \-181       | \-0.27%  |
| Cell                          | 12,920      | 13,175      | +255        | 1.97%    |
| CellLine                      | 38,810      | 38,810      | 0           | 0.00%    |
| CellularComponent             | 14,676      | 14,696      | +20         | 0.14%    |
| ChemicalEntity                | 662,991     | 4,046,131   | +3,383,140  | 510.28%  |
| ChemicalMixture               | 529         | 530         | +1          | 0.19%    |
| ComplexMolecularMixture       | 286         | 276         | \-10        | \-3.50%  |
| Disease                       | 628,736     | 632,330     | +3,594      | 0.57%    |
| Drug                          | 359,131     | 360,925     | +1,794      | 0.50%    |
| Gene                          | 75,520,611  | 79,427,652  | +3,907,041  | 5.17%    |
| GeneFamily                    | 27,985      | 28,050      | +65         | 0.23%    |
| GrossAnatomicalStructure      | 15,655      | 15,709      | +54         | 0.34%    |
| MacromolecularComplex         | 1,258       | 1,258       | 0           | 0.00%    |
| MolecularActivity             | 203,862     | 206,636     | +2,774      | 1.36%    |
| MolecularMixture              | 21,150,406  | 21,879,355  | +728,949    | 3.45%    |
| OrganismTaxon                 | 3,455,969   | 3,543,867   | +87,898     | 2.54%    |
| Pathway                       | 52,815      | 53,125      | +310        | 0.59%    |
| PhenotypicFeature             | 480,603     | 483,108     | +2,505      | 0.52%    |
| Polypeptide                   | 188         | 166         | \-22        | \-11.70% |
| Protein                       | 274,887,335 | 275,514,857 | +627,522    | 0.23%    |
| Publication                   | 78,061,642  | 79,773,973  | +1,712,331  | 2.19%    |
| SmallMolecule                 | 221,021,085 | 221,734,011 | +712,926    | 0.32%    |
| umls                          | 891,770     | 897,846     | +6,076      | 0.68%    |
